#!/usr/bin/env ruby

require 'cijoe_passenger'

ARGV << '--help' if ARGV.empty?

command = ARGV.shift

case command
when '-h', '--help'
  puts <<-EOT
Usage: cijoep COMMAND [ARGS]

Commands:
install URL                   Install cijoe_passenger into current directory and configure for URL
add NAME|REPO_URL [REPO_URL]  Adds app to current cijoe_passenger directory using repo at REPO_URL
scan                          Scans apps for updates and sends necessary build requests to cijoe
  EOT
else
  # module CIJoePassenger
  #   config_path = File.join('config', 'config.yml')
  #   config_yml = File.exist?(config_path) ? YAML.load_file(config_path) : {}
  #   Config = OpenStruct.new(config_yml)
  # end

  CIJoePassenger.const_get(command.capitalize.to_sym).start(ARGV)
end